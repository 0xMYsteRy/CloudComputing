{"ast":null,"code":"import _objectSpread from\"/Users/mystery/Desktop/bookstore-v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/mystery/Desktop/bookstore-v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/mystery/Desktop/bookstore-v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";var CartContext=React.createContext();var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){var total=_toConsumableArray(cart).reduce(function(total,_ref2){var amount=_ref2.amount,price=_ref2.price;return total+=amount*price;},0);setTotal(parseFloat(total.toFixed(2)));},[cart]);var increaseAmount=function increaseAmount(id){var updatedCart=_toConsumableArray(cart).map(function(item){return item.id===id?_objectSpread(_objectSpread({},item),{},{amount:item.amount+1}):item;});setCart(updatedCart);};var decreaseAmount=function decreaseAmount(id,amount){var updatedCart=[];if(amount===1){updatedCart=_toConsumableArray(cart).filter(function(item){return item.id!==id;});}else{updatedCart=_toConsumableArray(cart).map(function(item){return item.id===id?_objectSpread(_objectSpread({},item),{},{amount:item.amount-1}):item;});}setCart(updatedCart);};var addToCart=function addToCart(book){var id=book.id,title=book.title,price=book.price,image=book.image;var cartItem=_toConsumableArray(cart).find(function(item){return item.id===id;});if(cartItem){increaseAmount(id);}else{var cartItems=[].concat(_toConsumableArray(cart),[{id:id,title:title,image:image,price:price,amount:1}]);setCart(cartItems);}};var clearCart=function clearCart(){setCart([]);};return/*#__PURE__*/React.createElement(CartContext.Provider,{value:{cart:cart,total:total,addToCart:addToCart,increaseAmount:increaseAmount,decreaseAmount:decreaseAmount,clearCart:clearCart}},children);};export{CartProvider,CartContext};","map":{"version":3,"sources":["/Users/mystery/Desktop/bookstore-v2/src/context/cart.js"],"names":["React","useState","useEffect","CartContext","createContext","CartProvider","children","cart","setCart","total","setTotal","reduce","amount","price","parseFloat","toFixed","increaseAmount","id","updatedCart","map","item","decreaseAmount","filter","addToCart","book","title","image","cartItem","find","cartItems","clearCart"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nconst CartContext = React.createContext();\n\nconst CartProvider = ({ children }) => {\n  const [cart, setCart] = useState([]);\n  const [total, setTotal] = useState(0);\n\n  useEffect(() => {\n    const total = [...cart].reduce((total, { amount, price }) => {\n      return (total += amount * price);\n    }, 0);\n    setTotal(parseFloat(total.toFixed(2)));\n  }, [cart]);\n\n  const increaseAmount = (id) => {\n    const updatedCart = [...cart].map((item) => {\n      return item.id === id ? { ...item, amount: item.amount + 1 } : item;\n    });\n    setCart(updatedCart);\n  };\n\n  const decreaseAmount = (id, amount) => {\n    let updatedCart = [];\n    if (amount === 1) {\n      updatedCart = [...cart].filter((item) => item.id !== id);\n    } else {\n      updatedCart = [...cart].map((item) => {\n        return item.id === id ? { ...item, amount: item.amount - 1 } : item;\n      });\n    }\n    setCart(updatedCart);\n  };\n\n  const addToCart = (book) => {\n    const { id, title, price, image } = book;\n    const cartItem = [...cart].find((item) => item.id === id);\n    if (cartItem) {\n      increaseAmount(id);\n    } else {\n      const cartItems = [...cart, { id, title, image, price, amount: 1 }];\n      setCart(cartItems);\n    }\n  };\n\n  const clearCart = () => {\n    setCart([]);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{ cart, total, addToCart, increaseAmount, decreaseAmount, clearCart }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport { CartProvider, CartContext };\n"]},"metadata":{},"sourceType":"module"}